%%% License: Creative Commons Attribution Share Alike 4.0 (see https://creativecommons.org/licenses/by-sa/4.0/)
%%% Slides are based heavily on earlier versions of this course taught by Jesper Rudiger.

\documentclass[english,10pt
%,handout
,aspectratio=169
]{beamer}
\input{../FM_preamble.tex}



\title{Financial Markets Microstructure \\ Exercises after L1}

\author{Egor Starkov}

\date{K{\o}benhavns Unversitet \\
	Spring 2023}



\begin{document}
	\AtBeginSection[]{
	\frame<beamer>{
		\frametitle{This lecture:}
		\tableofcontents[currentsection,currentsubsection]
	}}

\frame[plain]{\titlepage}


%\section{Strategic vs Competitive behavior}
%
%\begin{frame}{Problem 0}
%	(Related to Lecture 1, not stated in the slides:)
%	
%	How does \alert{strategic} behavior differ from \structure{competitive behavior}?
%\end{frame}
%
%
%\begin{frame}{Price-taking behavior (`thruthful' bidding)}
%	Suppose the possible prices are $\{1,2,3,4,5\}$. At these prices:
%	\begin{itemize}
%		\item Agent 1 will supply respectively 2, 3, 5, 6, 8
%		\item Agent 2 will demand respectively 10, 7, 7, 6, 4
%	\end{itemize}
%	\begin{figure}
%		\includegraphics[width=.4\paperwidth]{pics/Image_PriceTaking2}
%	\end{figure}
%	Here: agents truthfully state their demand/supply
%\end{frame}
%
%
%\begin{frame}{Strategic bidding}
%	\begin{itemize}
%		\item What if agent 2 prefers 5 units at price 3 instead of 6 units at price 4?
%		\item He can 'lie' about his demand schedule to the auctioneer
%		\item Suppose he says he demands 10, 7, 5, 5, 4
%	\end{itemize}
%	\begin{figure}
%		\includegraphics[width=.4\paperwidth]{pics/Image_Strategic2}
%	\end{figure}
%	Why would agent 2 want fewer units? Pay lower price on all units. (Parallel to monopolist restricting supply to get higher price).
%\end{frame}



\section{Let's talk about GameStop}

\begin{frame}{GameStop}
	\begin{enumerate}
		\item What kind of traders are involved on both sides? Based on that fact: why has this story made the news?
		\item \textcolor{gray}{Would now be a good time to buy GameStop stock? Why/why not?}
		\item Robinhood (trading app) halted trading in GameStop stocks at some point. Is there a scope for some regulatory intervention to prevent this kind of exclusion of retail traders?
	\end{enumerate}
\end{frame}


\section{Nikola who?}

\begin{frame}{Nikola}
	Is Hindenburg Research an insider? Is it an informed trader? 
\end{frame}



\section{Problems from Lecture 1}

\begin{frame}{Lecture 1}
	From Lecture 1: problems 1-3 from FPR ch.1 (pp. 44-45)
\end{frame}


\begin{frame}{Orders}
	We have a collection of limit orders and market orders
	\begin{itemize}
		\item Limit buy orders:
		\begin{itemize}
			\item 100 shares at bid price 3
			\item 200 shares at bid price 4
			\item 200 shares at bid price 3.5
			\item 500 shares at bid price 2.5
		\end{itemize}
		\item Limit sell orders:
		\begin{itemize}
			\item 500 shares at ask price 5
			\item 600 shares at ask price 3
			\item 500 shares at ask price 4
		\end{itemize}
		\item Market buy order: 500
		\item Market sell order: 200
	\end{itemize}
\end{frame}


\begin{frame}{Call auction}
	Recall idea of a call auction:
	\begin{itemize}
		\item Orders are collected (in a `batch') and cleared at a certain frequency
		\item The price is chosen so as to maximize the number of executed orders
		\item \textcolor{red}{Uniform price}: all orders in a batch trades at same price
	\end{itemize}
	\quad
	Let's build the auction step by step
\end{frame}


\begin{frame}{Call auction}
	Limit buy order of 100 shares at bid price 3
	\quad
	\center
	\includegraphics[width=.75\linewidth]{pics/Call_t1}
\end{frame}


\begin{frame}{Call auction}
	Limit buy order of 200 shares at bid price 4
	\quad
	\center
	\includegraphics[width=.75\linewidth]{pics/Call_t2}
\end{frame}


\begin{frame}{Call auction}
	Limit buy order of 200 shares at bid price 3.5
	\quad
	\center
	\includegraphics[width=.75\linewidth]{pics/Call_t3}
\end{frame}


\begin{frame}{Call auction}
	Limit buy order of 500 shares at bid price 2.5
	\quad
	\center
	\includegraphics[width=.75\linewidth]{pics/Call_t4}
\end{frame}


\begin{frame}{Call auction}
	Limit sell order of 500 shares at ask price 5
	\quad
	\center
	\includegraphics[width=.75\linewidth]{pics/Call_t5}
\end{frame}


\begin{frame}{Call auction}
	Limit sell order of 600 shares at ask price 3
	\quad
	\center
	\includegraphics[width=.75\linewidth]{pics/Call_t6}
\end{frame}


\begin{frame}{Call auction}
	Limit sell order of 500 shares at ask price 4
	\quad
	\center
	\includegraphics[width=.75\linewidth]{pics/Call_t7}
\end{frame}


\begin{frame}{Call auction}
	Market buy order of 500 shares
	\quad
	\center
	\includegraphics[width=.75\linewidth]{pics/Call_t8}
\end{frame}


\begin{frame}{Call auction}
	Market sell order of 200 shares
	\quad
	\center
	\includegraphics[width=.75\linewidth]{pics/Call_Clearing}
\end{frame}


\begin{frame}{Call auction}
	Market clears at price 3.5, with 800 units being sold
	Filled buy orders:
	\begin{itemize}
		\item The market order is filled completely
		\item The limit order for 200 shares at price 4 is filled completely
		\item The limit order for 200 shares at price 3.5 is filled partially (100 shares)
	\end{itemize}
	Filled sell orders:
	\begin{itemize}
		\item The market order is filled completely
		\item The limit order for 600 shares at price 3 is filled completely
	\end{itemize}
	Thus: \textit{Excess demand} at the clearing price
\end{frame}


\begin{frame}{Continuous auction}
	Recall idea of a continuous auction:
	\begin{itemize}
		\item Some traders post limit orders (provide liquidity)
		\item Some traders post market orders (take liquidity)
		\item Trades occur either through 
		\begin{enumerate}
			\item a limit order 'match' (somebody posts a bid price above the lowest ask price), or
			\item through market orders
		\end{enumerate}
		\item \textcolor{red}{Discriminatory price}: depends on how your order is matched
	\end{itemize}
\end{frame}


\begin{frame}{Continuous auction}
	Limit buy order of 100 shares at bid price 3
	\quad
	\center
	\includegraphics[width=.75\linewidth]{pics/Continuous_t1}
\end{frame}


\begin{frame}{Continuous auction}
	Limit buy order of 200 shares at bid price 4
	\quad
	\center
	\includegraphics[width=.75\linewidth]{pics/Continuous_t2}
\end{frame}


\begin{frame}{Continuous auction}
	Limit buy order of 200 shares at bid price 3.5
	\quad
	\center
	\includegraphics[width=.75\linewidth]{pics/Continuous_t3}
\end{frame}


\begin{frame}{Continuous auction}
	Limit buy order of 500 shares at bid price 2.5
	\quad
	\center
	\includegraphics[width=.75\linewidth]{pics/Continuous_t4}
\end{frame}


\begin{frame}{Continuous auction}
	Limit sell order of 500 shares at ask price 5. Spread =  1
	\quad
	\center
	\includegraphics[width=.75\linewidth]{pics/Continuous_t5}
\end{frame}


\begin{frame}{Continuous auction}
	Limit sell order of 600 shares at ask price 3
	\quad
	\center
	\includegraphics[width=.75\linewidth]{pics/Continuous_t6open}
\end{frame}


\begin{frame}{Continuous auction}
	Seller executes 200 shares at price 4, 200 at price 3.5, and 100 at price 3. Spread = 0.5
	\center
	\includegraphics[width=.75\linewidth]{pics/Continuous_t6close}
\end{frame}


\begin{frame}{Continuous auction}
	Limit sell order of 500 shares at ask price 4. Spread = 0.5
	\center
	\includegraphics[width=.75\linewidth]{pics/Continuous_t7}
\end{frame}


\begin{frame}{Continuous auction}
	Market buy for 500 shares -- buys 100 shares at price 3, and 400 at 4. Spread = 1.5
	\center
	\includegraphics[width=.75\linewidth]{pics/Continuous_t8}
\end{frame}


\begin{frame}{Continuous auction}
	Market sell order of 200 shares. Executes against 200 shares at price 2.5. Spread = 1.5
	\center
	\includegraphics[width=.75\linewidth]{pics/Continuous_t9}
\end{frame}


\begin{frame}{Efficiency}
	Suppose limit order traders' valuation is equal to their price, market order buyers have valuation 10, market order sellers have valuation 0
	
	{\center
		\includegraphics[width=.6\linewidth]{pics/Efficiency3}
	\\
	}
	
	%Can any profitable trades be made after market closes?
\end{frame}


\begin{frame}{Welfare}
	We can also do a welfare calculation, using the post market holdings of each type
	\quad
	\center
	\includegraphics[width=.6\linewidth]{pics/Welfare3}
	\quad
\end{frame}


\begin{frame}{Clarifications}
	\begin{itemize}
		\item To clarify: in the previous two slides, I assumed that every trader wants to trade to close their position, so initial position = negative of placed order. You could assume instead that everyone starts with zero positions, and you'd get the same (relative) values for welfare.
		\item Welfare calculation just multiplies every trader's position (before or after trade) by their valuation for the asset, and sums over traders.
	\end{itemize}
\end{frame}


\begin{frame}{Conclusions}
	\begin{itemize}
		\item The two formats result in different sets of trades. 
		\begin{itemize}
			\item Both outcomes are Pareto-optimal -- there are no profitable trades left to conduct after market closes under either scenario.
		\end{itemize}
	
		\item In our case, call auction generated better welfare results, but this is \textbf{not} a general result.
		\item Welfare ranking of call vs continuous auction can go either way, and depends on the specific \structure{order}, in which trades arrive at the market.
	\end{itemize}
\end{frame}


\end{document} 